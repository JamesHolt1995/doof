---
import { Image } from "astro:assets";
import Image1 from "../img/HannahLaing_TripleF_RGB_01_B.jpg";
import Image2 from "../img/Nancy_Flat_1080.jpg";
import Image3 from "../img/003_Flat.jpg";
import Image4 from "../img/BK---No-Fool-Cover-Art-Flat.jpg";
import Image5 from "../img/005-FINAL.jpg";
import Image6 from "../img/006-FINAL-(NO-DOTS).jpg";
import Image7 from "../img/007-plastic.jpeg";
---

<div class="releases">
	<div class="releases__header">
		<div>DOOF RELEASES</div>
		<div>DATE</div>
	</div>
	<ul style="text-transform: uppercase;" class="releases__list">
		<li data-image={Image7.src} class="releases__item releases__item--active">
			<div class="releases__item-title">
				007 / Trevor & Simon vs NRG Trax "Hands Up”
			</div>
			<a href="https://doof.lnk.to/TotheBeatoftheDrum">LINK</a>
		</li>
		<li data-image={Image6.src} class="releases__item">
			<div class="releases__item-title">
				006 / The Obsessed, DBF To the Beat of the Drum
			</div>
			<a href="https://doof.lnk.to/TotheBeatoftheDrum">LINK</a>
		</li>
		<li data-image={Image5.src} class="releases__item">
			<div class="releases__item-title">005 / RALLYY “Please F Off”</div>
			<a href="https://doof.lnk.to/pleasefoff">LINK</a>
		</li>
		<li data-image={Image4.src} class="releases__item">
			<div class="releases__item-title">004 / BK “No Fool”</div>
			<a href="https://doof.lnk.to/nofool">LINK</a>
		</li>
		<li data-image={Image3.src} class="releases__item">
			<div class="releases__item-title">
				003 / DAVID RUST, UBERJAK'D FT ELLA YOUNG GO INSANE
			</div>
			<a href="https://doof.lnk.to/goinsane">LINK</a>
		</li>
		<li data-image={Image2.src} class="releases__item">
			<div class="releases__item-title">002 / NANCY Live “Melbourne” EP</div>
			<a href="https://doof.lnk.to/NANCYLiveMelbourneEP">LINK</a>
		</li>
		<li data-image={Image1.src} class="releases__item releases__item--last">
			<div class="releases__item-title">001 / HANNAH LAING TRIPLE F</div>
			<a href="https://ffm.to/hannah-laing-triple-f">LINK</a>
		</li>
	</ul>
</div>

<div class="release-preview">
	<div class="release-preview__inner">
		<div class="release-preview__image-container">
			<Image id="previewImage" width="800" src={Image7} alt="Release" />
		</div>
	</div>
</div>

<style lang="scss">
	.releases {
		position: absolute;
		top: 0;
		background-color: white;
		width: 100%;
		color: black;
		min-height: 150vh;
		box-sizing: border-box;
		padding-bottom: 60vh;
		&__header {
			padding: 20px;
			border-bottom: 1px solid #333;
			width: 100%;
			display: flex;
			justify-content: space-between;
			position: fixed;
			top: 0;
			background-color: var(--white);
		}
		&__list {
			list-style: none;
			padding: 0;
			margin: 0;
			padding-top: 58px;
			overflow: scroll;
			height: 48vh;
			a {
				color: black;
			}
		}
		&__item {
			display: flex;
			justify-content: space-between;
			width: 100%;
			padding: 20px;
			font-size: 14px;
			&--active {
				background-color: var(--highlight);
			}
			&--last {
				margin-bottom: 40px;
			}
			&-title {
				padding-right: 15%;
			}
			&:hover {
				cursor: pointer;
			}
		}
	}
	.release-preview {
		position: fixed;
		width: 100%;
		bottom: 0;
		background-color: var(--background);
		&__inner {
			padding: 10px;
		}
		&__image-container {
			width: 100%;
			height: 0;
			padding-top: 100%;
			position: relative;
			img {
				position: absolute;
				top: 0;
				width: 100%;
				height: 100%;
				object-fit: contain;
			}
		}
	}

	@media screen and (min-width: 600px) {
		.release-preview {
			&__image-container {
				padding-top: 0;
				height: 50vh;
			}
		}
	}

	@media screen and (min-width: 900px) {
		.releases {
			height: calc(100% - 140px);
			min-height: auto;
			width: 50%;
			top: 70px;
			margin-left: auto;
			position: fixed;
			right: 0;
			overflow: scroll;

			z-index: 101;
			&__header {
				position: fixed;
				top: 70px;
			}
			&__list {
				padding-top: 58px;
				min-height: 120vh;
				overflow: scroll;
			}
		}

		.release-preview {
			width: 50%;
			height: 100%;
			&__inner {
				width: 100%;
				height: 100%;
				padding: 100px;
			}
			&__image-container {
				height: 100%;
			}
		}
	}
</style>

<script>
	const items = document.querySelectorAll(".releases__item");
	const previewImage = document.querySelector("#previewImage");

	const toggle = (item) => {
		item.addEventListener("click", (e) => {
			item.classList.toggle("releases__item--active");
			let image = item.dataset.image;
			previewImage.src = image;
			for (var i = 0; i < items.length; i++) {
				if (e.currentTarget != items[i]) {
					// check here
					items[i].classList.remove("releases__item--active");
				}
			}
		});
	};

	items.forEach(toggle);
</script>
